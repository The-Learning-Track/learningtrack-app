<!DOCTYPE HTML>
<html>
	<head>
	<!-- <button onclick="updateGraph();">Update</button> -->
	<form id="somform">
	<a href="..\studio.html" style='border:2px solid #a1a1a1; padding:5px 10px; text-align: center; width: 100px; background:#dddddd; border-radius:25px; text-decoration: none; color: black;  font-family:Arial,Helvetica,sans-serif;'>Go Back</a>
	<select id="sample" style="font-size: medium;" onchange="javascript:location.href=this.value"> <!--will update the graph -->
	</select>
</form>

		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script type="text/javascript" src="graphFunctions.js"></script>
		<script type="text/javascript">	
	var myselect = document.getElementById("sample");
	var categoryArray = new Array();
	categoryArray = GetCategory();
	
	var category = getCategoryID();	 //get the category ID from the URL
	//var categoryname = categoryArray[category].name; //get the name of the category from the URL
	if (category > categoryArray.length)
	{
		categoryname = 'Overall';
	}
	else{
	var categoryname = categoryArray[category].name; //get the name of the category from the URL
	}
	
	/* ========= GET THE PATH NAME ============ */
	//var url1 = document.URL;
	//var path_pre = url1.split("?id="); //remove the category from the url
	//var path = path_pre[0]; //this is for the category
	
	var pathArray = document.URL;
	var index = pathArray.indexOf('?id=');
	seatnum = getStudentID2();
	//alert (seatnum);
	
	for (i = 0; i < categoryArray.length; i++) //will create the drop down based on the amount of categories that there are
	{
		//alert(catID);
		if (i == category){ //if it's the category that's selected in the URL
			var url='standardDevStudio.htm?id='+seatnum+'?cat=' + i;
			myselect.add(new Option(categoryArray[i].name, url, true, true));	}
		else
		{
			var url='standardDevStudio.htm?id='+seatnum+'?cat=' + i;
			myselect.add(new Option(categoryArray[i].name, url));
		}
	}
	
	var nextoption = categoryArray.length + 1;
	url = 'standardDevStudio.htm?id='+seatnum+'?cat=' + nextoption;
	//======= ADDS THE OVERALL OPTION TO THE MENU AND DEFAULTS IT IF THE CATEGORY MENU IS THAT OF OVERALL
	if (category == nextoption){
	myselect.add(new Option('Overall', url, true, true));
	}
	else{
		myselect.add(new Option('Overall', url));
	}

	
$(function () {

	 
	 if (categoryname != 'Overall')
	{	 
		 var categoryArray = new Array();
		 categoryArray = GetCategory();
		 var assignmentsArray = new Array();
		 assignmentsArray = GetAssignment();
		 var gradeArray = new Array();
		 gradeArray = GetGrades();
		 var randomarray = new Array();
		 var seats = GetSeats();
		 var seats_pre = GetSeats();
		// var ids = new Array();
		 var stud_id;
		 for (i = 0; i < seats_pre.length; i++)
		 {
			// ids.push(seats_pre[i].idnumber);
			 if (seats_pre[i].seatnumber == seatnum)
			 {
				 stud_id = seats_pre[i].idnumber;
				 //alert(stud_id);
			 }
		 }
		 plotObject = createPlotObject(assignmentsArray, categoryname, gradeArray, stud_id);
	}

	if (categoryname == 'Overall'){ 
		 var categoryArray = new Array();
		 categoryArray = GetCategory();
		 var assignmentsArray = new Array();
		 assignmentsArray = GetAssignment();
		 var gradeArray = new Array();
		 gradeArray = GetGrades();
		 var seats_pre = GetSeats();
		 var ids = new Array();
		 var stud_id;
		 for (i = 0; i < seats_pre.length; i++)
		 {
			 ids.push(seats_pre[i].idnumber);
			 if (seats_pre[i].seatnumber == seatnum)
			 {
				 stud_id = seats_pre[i].idnumber;
			 }
		 }
		 plotObject = overallGroupStats(stud_id, ids);
		 
		 
		 
	
	}
	 
	 //alert(plotObject.dataArray);
	 
	 //plotObject=createPlotObject(assignmentsArray, 'Homework', randomarray);
	            
    $('#container').highcharts({

	    chart: {
	        type: 'boxplot'
	    },
	    
       title: {
            text: plotObject.title
       },
        
       subtitle: {
            text: plotObject.subtitle, //this changes
       },
	    
	    legend: {
	        enabled: false
	    },
	
	    xAxis: {
	        categories: plotObject.nameArray, 
	        //['Hi', '2', '3'], //changes
	        title: {
	            text: plotObject.xAxis
	        }
	    },
	    
	    yAxis: {
	        title: {
	            text: plotObject.yAxis
	        }

	    },
	
	    series: [{
	        name: 'Scores',
	        data: plotObject.dataArray,
	         //arrayofarray, 
	        	//[
                //MIN,-σ,STUDENTSCORE,+σ,MAX,AVERAGE
	           //[76, 80, 88, 89, 96, 88],
	           //[73, 85, 93, 98, 100, 88],
	            //[71, 76, 81, 87, 91, 72]
	        //],
	        tooltip: {
	            headerFormat: ''
	        }
	    }]
	
	});
});	

		</script>
	</head>
	<body>
<script src="highcharts.js"></script>
<script src="highcharts-more.js"></script>
<script type="text/javascript">

</script>
<div id="container" style="width: 900px; height: 600px; margin: 0 auto; border-bottom: solid gray 1px"></div>


	</body>
</html>
